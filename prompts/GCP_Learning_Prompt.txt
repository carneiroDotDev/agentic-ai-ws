// This prompt was suggested during a GCP lab.

As an expert in cloud infrastructure, perform an in-depth analysis of the main.tf file to serve as a detailed onboarding document for a new engineer.

* Identify the code's primary function.
* Highlight the key design patterns and best practices that make it a robust and reusable module.
* Explain how the code uses advanced Terraform features like dynamic blocks and count to achieve flexibility.
* Conclude with a high-level summary of the overall design philosophy.

For the suggested improvements, don't update this file.